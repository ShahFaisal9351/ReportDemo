@{
    Layout = "~/Views/Shared/_AuthLayout.cshtml";
    ViewData["Title"] = "Authentication Test";
}

<div class="text-center">
    <div class="alert alert-info" role="alert">
        <h4 class="alert-heading"><i class="fas fa-bug me-2"></i>Authentication Debug Info</h4>
        <p>This page shows the current authentication state for debugging.</p>
    </div>

    <div class="card">
        <div class="card-body text-start">
            <h5>Current Authentication State:</h5>
            <ul class="list-group list-group-flush">
                <li class="list-group-item d-flex justify-content-between">
                    <strong>Is Authenticated:</strong>
                    <span class="badge @(ViewBag.AuthInfo.IsAuthenticated ? "badge-success" : "badge-danger")">
                        @ViewBag.AuthInfo.IsAuthenticated
                    </span>
                </li>
                <li class="list-group-item d-flex justify-content-between">
                    <strong>User Name:</strong>
                    <span>@ViewBag.AuthInfo.UserName</span>
                </li>
                <li class="list-group-item d-flex justify-content-between">
                    <strong>Session Active:</strong>
                    <span>@(ViewBag.AuthInfo.SessionActive ?? "No")</span>
                </li>
                <li class="list-group-item d-flex justify-content-between">
                    <strong>Login Time:</strong>
                    <span>@(ViewBag.AuthInfo.LoginTime ?? "Never")</span>
                </li>
                <li class="list-group-item d-flex justify-content-between">
                    <strong>App Instance ID:</strong>
                    <span>@(ViewBag.AuthInfo.AppInstanceId ?? "None")</span>
                </li>
                <li class="list-group-item d-flex justify-content-between">
                    <strong>Cookie Count:</strong>
                    <span class="badge badge-info">@ViewBag.AuthInfo.CookieCount</span>
                </li>
            </ul>
            
            @if (ViewBag.AuthInfo.Cookies != null && ViewBag.AuthInfo.Cookies.Length > 0)
            {
                <h6 class="mt-3">Cookies:</h6>
                <ul class="list-unstyled">
                    @foreach (var cookie in ViewBag.AuthInfo.Cookies)
                    {
                        <li><small class="text-muted">â€¢ @cookie</small></li>
                    }
                </ul>
            }
        </div>
    </div>

    <div class="mt-4">
        <div class="row g-2">
            <div class="col-sm-3">
                <a href="/Account/Login" class="btn btn-primary w-100">Login</a>
            </div>
            <div class="col-sm-3">
                <a href="/Account/ForceLogout" class="btn btn-danger w-100">Force Logout</a>
            </div>
            <div class="col-sm-3">
                <a href="/Account/ClearSession" class="btn btn-warning w-100">Clear Session</a>
            </div>
            <div class="col-sm-3">
                <a href="/" class="btn btn-info w-100">Home</a>
            </div>
        </div>
    </div>

    <div class="mt-3">
        <small class="text-muted">
            Refresh this page to see current state after performing actions.
        </small>
    </div>
</div>